## Запуск приложения

Для запуска приложения необходимо перейти в браузере Google Chrome по адресу приложения http://lighthouse.local. На странице входа ввести логин и пароль, предоставленные администратором системы.

## Общие сведения

В верхней части страницы находится заголовок приложения, колокольчик со списком уведомлений, адресованных текущему пользователю и кнопка выхода. После нажатия на кнопку выхода пользователь приложения перенаправляется на страницу входа.

В левой части окна приложения находится панель управления (меню) для перехода между функциями приложения. В панели находятся доступные пользователю функции. Разные пользователи имеют различные права доступа.

## Работа со справочниками

В разделе меню **Справочники** находятся справочники, содержащие редкоизменяемые данные системы. В приложении присутствуют следующие справочники:

* Ед. измерения
* Тара
* Сырьё
* Продукция
* ТМЗ
* Производственные линии
* Затраты
* Работы - виды работ сотрудников на производстве
* Методы оплат - способы получения оплат от клиентов по контрактам

Дополнительные справочники для управления структурой предприятия представлены в разделе **Организация**:

* Реквизиты - общие реквизиты предприятия
* Должности - список должностей сотрудников
* Структура - структура предприятия
* Сотрудники - сотрудники предприятия
 

## Контракты

Список контрактов находится в меню **Страницы - Контракты**. 

По умолчанию отображается список контрактов, созданные текущим пользователем (отметка **Мои контракты** доступна 
группе администраторов, финансовой группе пользователей) и имеющие статус **В работе**.

Поиск контракта осуществляется по номеру контракта. 

Добавление нового контракта: **Новый контракт**. При добавлении контракта следует указывать все обязательные поля, 
помеченные знаком звёздочки *. 

Скидка рассчитывается следующим образом: в поле **Скидка** следует указать % скидки от цены продукции. Нажав кнопку 
**Пересчитать** будет выполнен пересчёт в таблице **Спецификация контракта**. Скидка будет рассчитана для каждой 
позиции. В случае, если не требуется устанавливать скидку по данной позиции, то её следует изменить или обнулить.

Контракт изменяем в состоянии **Черновик** и **Активный**. В данных состояниях может поступать оплата, редактироваться данные. 
При закрытии договора изменения невозможны. 

Изменение состояния договора выполняется следующим образом: в правом верхнем углу контракта кнопка с тремя точками.

Владелец контракта или пользователь финансовой группы имеют возможность добавить любого сотрудника в список разрешённых 
для работы с выбранным контрактом. Для этого необходимо открыть контракт и на вкладке **Дополнительно** добавить 
сотрудника в список.  


## Рецептура

При добавлении новой рецептуры следует указать продукцию, на которую производится расчёт, указать рассчитываемое количество, % потерь и плотность продукции.

#### Пример 1

Создать рецептуру для продукции Айсберг.

* создать продукцию Айсбер через справочник **Продукция**

* добавить сырьё **Карбонат кальция**

* добавить сырьё **Сухой лёд**

* создать новую рецептуру. Выбрать из списка продукцию **Айсберг**, указать рассчётное количество 1000, плотность 
оставить по умолчанию 1 г/см3

* добавить сырьё Карбонат кальция с концентрацией 90%, содержанием 540

* добавить сырьё Сухой лёд с концентрацией 100%, не указывать содержимое

* нажать кнопку **Капля** для автоматического расчёта поля **Количество** 
 
В итоге должно быть: Карбоната кальция 600 кг, сухого льда - 400 кг.


#### Пример 2

Создать рецептуру для продцукции Ёж 500

* создать продукцию Ёж 500 через справочник **Продукция**"

* добавить сырьё **Плюмбит железа, 82%** 

* добавить сырьё **Дептрил, 95%**

* добавить сырьё **Эмульгатор Z**

* создать новую рецептуру. Выбрать из списка продукцию **Ёж 500**, указать рассчётное количество 1000, 
плотность  1,54 г/см3.

* добавить сырьё "Плюмбит железа, 82%" с концентрацией 82%, содержанием 420 кг

* добавить сырьё "Дептрил, 95%" с концентрацией 95%, содержанием 50 кг

* добавить сырьё "Эмульгатор Z" с концентрацией 100%, дополнительно ничего не указывать

* нажать кнопку **Капля** для автоматического расчёта полей *Количество*

В итоге должно быть: **Плюмбита железа, 82%**:  512.2, **Дептрила, 95%**: 52.6, **Эмульгатор Z**: 975.2.


## Производственная карта

Производственная карта находится в меню **Страницы -  Производство**. 

Журнал производственных карт по умолчанию отображается с установленным фильтром по состоянию карт в работе. При выборе 
состояния карт в состоянии **Выполненные**, **С ошибкой**, **Отменённые** требуется указать период для получения списка. 
При выборе состояния появляются дополнительные поля ввода фильтра: начало и окончание периода. Кнопкой **Обновить**
запрашиваются данные с сервера. 

Карта может быть удалена в состоянии **Черновик**. 

Создание карты выполняется кнопкой **Новая карта**. Каждая карта составляется на один вид приготавливаемой продукции.
После выбора продукции необходимо выбрать и указать рецептуру расчёта, на основе которой будет готовиться выбранный
вид продукции. Затем необходимо указать производственную линию, выбрав из списка. 

Поле начала процесс должно быть заполнено. Окончание процесса указывается по факту окончания.

В поле **Расчёт** указывается количество продукции, которое планируется получить. На данное значение производится расчёт 
сырья.

В поле **Выход** должно быть указано количество продукции, полученное фактически. Данное значение сравнивается с
выходом по таре.

В поле **Потери** указывается количество потерь готовой продукции.

Вкладка **Калькуляция** содержит неизменяемую базовую калькуляцию сырья.

На вкладке **Калькуляция факт.** распложена таблица с рассчитанной калькуляцией, доступной для изменения. По данной 
калькуляции выполняется производство.

На вкладке **Смены** находится список сотрудников, которые задействованы в производстве. Кнопкой **Добавить** 
добавляются новые позиции. Необходимо выбрать сотрудника, вид работ и указать время работы на данном участке работ.

Вкладка **Выход продукции** содержит распределение продукции по таре. 

При закрытии производственной карты производятся проверки:

* сравнение действительного выхода продукции и расфасованной по таре продукции;

* проверка наличия сотрудников в сменах

* проверка заполнения обязательных полей: дата/время окончания работ, предыдущее состояние карты.
   


## Управление ценами

### Цены

Общие цены по продукции находятся в меню Страницы - Цены. В таблице представлены цены на производимую продукцию. Данные 
цены используются как базовые при формировании прайс-листов менеджеров. Формируется прайс-лист для менеджера кнопкой
**По шаблону**. Менеджеру формируется прайс-лист только на те позиции, которые указаны в его карточке. Необходимо в 
окне редактирования сотрудника меню **Организация - Сотрудники** добавить необходимую продукцию на вкладке **Прайс-лист**. 

Главное условие создания прайс-листа для менеджера: наличие основных цен на выбранную продукцию. Отдельные позиции
могут быть добавлены вручную на любого сотрудника.


## Прайс-листы

Прайс-листы для менеджеров находятся в меню Страницы - Прайс. В таблице прайсов отображаются действующие цены на продукцию. Данные цены
 используются при формировании контракта. Цена на продукцию формируется от указанной даты. Запись с ценой будет действовать 
 до того момента, пока не будет добавлена новая запись с продукцией.
 
Кнопкой **История** может быть просмотрена история изменения цены.

При изменении цены следует добавить новую запись и внести необходимые данные. Не следует изменять существующую запись 
в прайсе, если только это не новая запись в которой требуется внести изменения в настоящее время сразу после добавления.
   

## Затраты

Ввод затрат производится через меню **Страницы - Затраты**. Статьи затрат должны быть занесены заблаговременно через 
справочники.  При добавлении новой позиции следует выбрать необходимую статью затрат, указать дату и сумму документа.
При необходимости следует заполнить поле **Дополнительно**.

Ввод затрат по сырью производится через журнал операций или приход сырья на склад. При создании нового вида сырья 
автоматически добавляется позиция в справочник затрат. Приход сырья также создаёт в списке затрат необходимую позицию.

## Склад

### Склад сырья

Склад сырья находится в меню **Страницы - Склад - Сырьё**. В списке представлен список сырья 
с количеством. При нажатии на кнопку **Подробнее** открывается список приходов сырья. Сырьё приходуется вручную, расход 
производится при закрытии производственной карты.

### Склад готовой продукции

Склад готовой продукции находится в меню **Страницы - Склад - Готовая продукция**. В списке представлен список продукции 
с количеством. При нажатии на кнопку **Подробнее** открывается список приходов готовой продукции. Готовая 
продукция приходуется при закрытии производственных карт, расход производится после закрытия контракта.


### Складской журнал

В складском журнале представлены операции по приходу и расходу материалов и продукции.  Складской журнал может быть 
отфильтрован по типу материала и периоду операций. 

В складском журнале находится кнопка прихода сырья. 

### Резерв продукции

Резерв продукции представлен списком готовой продукции, которая поставлена в резерв менеджерами по продажам. Список 
расположен в меню **Страницы-Склад-Резерв продукции**. 

В таблице резерва расположены две кнопки: кнопка удаления продукции из резерва и просмотра контракта, к которому 
относится резерв. Для изменения резерва необходимо отредактировать постановку в резерв в контракте. 

## Управление пользователями

Управление пользователями выполняется в меню Администрирование-Пользователи. Меню доступно только для группы администраторов. 

Список пользователей по умолчанию отображает только активных пользователей (блокированные пользователь скрываются). 
В верхней части страницы доступен поиск по логину.

Создание нового пользователя должно начинаться с создания нового сотрудника в меню **Организация-Сотрудники**.  
Затем следует нажать кнопку **Новый пользователь**. На странице добавления пользователя указать логин нового пользователя,
почтовый адрес, имя и фамилию, выбрать из списка сотрудника (привязать учётную запись к сотруднику предприятия), ввести 
пароль нового пользователя. В правой части окна следует указать доступные группы пользователя.

*Внимание! Отметка **Администратор** позволяет подключаться к административной панели сайта для управления данными напрямую. 
Ни одному рядовому пользователю не следует выдавать доступ к администрированию. Это чревато проблемами с безопасностью.*

## Настройки

В настройках приложения находятся общие настройки.

Ставка НДС - ставка НДС по которой рассчитывается стоимость отпуска продукции.

Дни резерва - дни, автоматически добавляемые к дате окончания резерва. Если взять текущую дату 1 число месяца, прибавить 
данное количество дней резерва получится дата окончания, до которой продукция будет находится в резерве.
